!function(){"use strict";jQuery((function(a){a(".cariera-options").on("click"," .nav-tab-wrapper a",(function(e){if(e.preventDefault(),"#"!==a(this).attr("href").substr(0,1))return!1;var t=a(this),i=t.attr("href").replace("#settings-",""),r=a(".cariera-settings .loader"),s=a(".cariera-options").data("settings");a(".nav-tab-active").removeClass("nav-tab-active"),t.addClass("nav-tab-active");var n=t.attr("href");return t.data("loaded")?(a(".settings_panel").hide(),a(n).show(),r.fadeOut(),window.location.hash=a(this).attr("href"),a("body,html").animate({scrollTop:a(".cariera-options").offset().top},300)):(r.fadeIn(),a.ajax({url:cariera_core_admin.ajax_url,type:"POST",data:{action:"cariera_load_settings_section",nonce:cariera_core_admin.nonce,section:i,settings_group:s},success:function(e){t.data("loaded",!0),a(n).html(e).show(),a(".settings_panel").hide(),a(n).show(),r.fadeOut(),window.location.hash=t.attr("href"),a("#setting-cariera_registration").on("change",(function(){a(this).is(":checked")?a("#settings-registration").find(".cariera-registration").removeClass("hidden"):a("#settings-registration").find(".cariera-registration").addClass("hidden")})),a("#settings-registration #setting-cariera_registration").trigger("change"),a("#setting-cariera_notifications").on("change",(function(){a(this).is(":checked")?a("#settings-notifications").find(".cariera-notifications").removeClass("hidden"):a("#settings-notifications").find(".cariera-notifications").addClass("hidden")})),a("#settings-notifications #setting-cariera_notifications").trigger("change"),a("#setting-cariera_map_provider").on("change",(function(){"none"===a(this).val()?a("#settings-maps").find(".cariera-maps").addClass("hidden"):a("#settings-maps").find(".cariera-maps").removeClass("hidden")})),a("#setting-cariera_maps").trigger("change"),a(".cariera-settings-wrap").on("change","#setting-cariera_moderate_new_user",(function(){"auto"==a(this).val()?(a("#settings-registration .cariera-registration.no-approval-required").show(),a("#settings-registration .cariera-registration.approval-required").hide(),a("#settings-registration .cariera-registration.approve-user-page").hide()):(a("#settings-registration .cariera-registration.no-approval-required").hide(),a("#settings-registration .cariera-registration.approval-required").show(),a("#settings-registration .cariera-registration.approve-user-page").show())})),a("#settings-registration #setting-cariera_moderate_new_user").trigger("change"),a(".cariera-settings-wrap, .job-manager-settings-wrap").on("change",".toggle-settings-field",(function(){var e=a(this).attr("name"),t=a('[data-toggleon="'+e+'"]'),i=a('[data-toggleoff="'+e+'"]');a(this).is(":checked")?(t.closest("tr").show(),i.closest("tr").hide()):(t.closest("tr").hide(),i.closest("tr").show())})),a(".cariera-settings-wrap, .job-manager-settings-wrap").find(".toggle-settings-field").trigger("change"),a(".cariera-settings-wrap").on("change",".toggle-settings-select-field",(function(){var e=a(this).attr("name"),t=a(this).val();a('[data-toggleon="'+e+'"]').each((function(){t==a(this).data("toggle-value")?a(this).closest("tr").show():a(this).closest("tr").hide()}))})),a(".cariera-settings-wrap").find(".toggle-settings-select-field").trigger("change"),a("body,html").animate({scrollTop:a(".cariera-options").offset().top},300),jQuery(document).trigger("settings_loaded")}.bind(this),error:function(){a(n).html("<p>Error loading settings. Please try again.</p>")}})),!1}));var e=window.location.hash;if(e){var t=a('a[href="'+e+'"]');t.length>0?t.click():a(".cariera-options .nav-tab-wrapper a:first").click()}else a(".cariera-options .nav-tab-wrapper a:first").click();a(document).on("settings_loaded",(function(){void 0!==wp.editor&&a(".wp-editor-area").each((function(){var e=a(this).attr("id");if(wp.editor.initialize(e,{tinymce:{toolbar1:"formatselect bold italic bullist numlist blockquote link alignleft aligncenter alignright alignjustify undo redo",wpautop:!0},quicktags:!1,mediaButtons:!1}),e){var t=tinyMCE.get(e);t&&t.on("change keyup",(function(){a("#"+e).val(t.getContent())}))}}))})),a(".cariera-settings").on("click",".ajax-wrapper .cariera-btn",(function(e){e.preventDefault();var t=a(this);if(!a(this).hasClass("loading")){var i=a(".cariera-ajax-msg"),r=i.find(".message"),s=a(this).data("action"),n=t.siblings('[data-field="'+s+'"]'),o=0===n.length?"":n.val();t.addClass("loading"),a.ajax({url:cariera_core_admin.ajax_url,type:"POST",dataType:"json",data:{nonce:cariera_core_admin.nonce,action:s,field:o},success:function(a){a.success?(i.addClass("loaded success"),r.html(a.data)):(i.addClass("loaded error"),r.html(a.data))},error:function(a,e,t){console.error("AJAX error:",e,t)},complete:function(){t.removeClass("loading"),setTimeout((function(){i.removeClass("loaded success error")}),4e3)}})}})),a(document).on("click",'[data-action="webhook-trigger"]',(function(e){e.preventDefault();var t=a(this);if(!a(this).hasClass("loading")){var i=a(".cariera-ajax-msg"),r=i.find(".message"),s=a(this).data("webhook"),n=a('[name="'+s+'"]').val();n.length?(t.addClass("loading"),a.ajax({url:cariera_core_admin.ajax_url,type:"POST",dataType:"json",data:{action:"cariera_webhook_trigger",webhook_id:s,webhook_url:n},success:function(a){a.success?(i.addClass("loaded success"),r.html(a.data.message),console.log(a.data.output)):(i.addClass("loaded error"),r.html(a.data))},error:function(a,e,t){console.error("AJAX error:",e,t)},complete:function(){t.removeClass("loading"),setTimeout((function(){i.removeClass("loaded success error")}),4e3)}})):alert("Please enter a valid webhook url!")}})),a("#cariera-settings-form").on("click",".save-settings",(function(e){e.preventDefault();var t=a(".save-settings"),i=a("#cariera-settings-form").serializeArray(),r=a(".cariera-ajax-msg"),s=r.find(".message");s.empty(),t.addClass("loading"),t.prop("disabled",!0),i.push({name:"action",value:"cariera_save_core_settings"}),i.push({name:"nonce",value:cariera_core_admin.nonce}),a.ajax({url:cariera_core_admin.ajax_url,type:"POST",data:i,dataType:"json",success:function(a){a.success?(r.addClass("loaded success"),s.html(a.data.message)):(r.addClass("loaded error"),s.html(a.data))},error:function(a,e,t){console.error("AJAX error:",e,t),s.html("An error occurred while saving settings. Please try again."),r.addClass("loaded error")},complete:function(){t.removeClass("loading"),t.prop("disabled",!1),setTimeout((function(){r.removeClass("loaded success error")}),4e3)}})}))}))}();